# Agent Integration Examples

_This file is generated by `scripts/generate-snippets.mjs`. Do not edit manually._

All examples come from canonical fixtures in `docs/fixtures/`.

## Scenarios

| Fixture | Preset | Destination | Why section | Notes |
|---|---|---|---|---|
| `release-standard` | `standard` | `release` | `false` | Canonical release draft request/response example. |
| `social-short` | `short` | `social` | `false` | Concise social draft request/response example. |
| `internal-standard-with-why` | `standard` | `internal` | `true` | Internal draft request/response example with rationale enabled. |

## Regenerate

```bash
npm run snippets:generate
npm run snippets:check
```

## release-standard

- Description: Canonical release draft request/response example.
- Tags: release, standard, default
- Request mode: preset=`standard`, destination=`release`, includeWhy=`false`
- Generated files: `docs/snippets/release-standard/request.json`, `docs/snippets/release-standard/response.json`, `docs/snippets/release-standard/curl.sh`, `docs/snippets/release-standard/python.py`, `docs/snippets/release-standard/javascript.mjs`

### Canonical request
```json
{
  "repo": "alex-builds-source/ship-note",
  "preset": "standard",
  "destination": "release",
  "includeWhy": false,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11",
  "releaseUrl": "https://github.com/alex-builds-source/ship-note/releases/tag/v0.1.11"
}
```

### Canonical response
```json
{
  "ok": true,
  "schema_version": "1.0",
  "repo": {
    "name": "alex-builds-source/ship-note",
    "url": "https://github.com/alex-builds-source/ship-note"
  },
  "range": {
    "base_ref": "v0.1.10",
    "target_ref": "v0.1.11",
    "range_spec": "v0.1.10..v0.1.11"
  },
  "options": {
    "preset": "standard",
    "group_by": "type",
    "destination": "release",
    "include_why": false
  },
  "stats": {
    "raw_commit_count": 1,
    "selected_commit_count": 1,
    "commit_items_used": 1,
    "changelog_items_used": 0,
    "bullet_line_count": 1
  },
  "sections": {
    "title": "# ship-note release draft",
    "what_shipped": [
      "- Make why-section optional and ship v0.1.11"
    ],
    "why_it_matters": [],
    "links": [
      "- Repo: https://github.com/alex-builds-source/ship-note",
      "- Release: https://github.com/alex-builds-source/ship-note/releases/tag/v0.1.11"
    ]
  },
  "items": [
    {
      "source": "commit",
      "text": "make why-section optional and ship v0.1.11",
      "sha": "a1b2c3d",
      "type": "other",
      "scope": "general"
    }
  ],
  "markdown": "# ship-note release draft\n\n## What shipped\n- Make why-section optional and ship v0.1.11\n\n## Links\n- Repo: https://github.com/alex-builds-source/ship-note\n- Release: https://github.com/alex-builds-source/ship-note/releases/tag/v0.1.11\n"
}
```

### cURL
```bash
#!/usr/bin/env bash
set -euo pipefail

curl -sS -X POST 'https://ship-note-web.pages.dev/api/generate' \
  -H 'content-type: application/json' \
  -d '{
  "repo": "alex-builds-source/ship-note",
  "preset": "standard",
  "destination": "release",
  "includeWhy": false,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11",
  "releaseUrl": "https://github.com/alex-builds-source/ship-note/releases/tag/v0.1.11"
}' | jq .
```

### Python
```python
import requests

URL = "https://ship-note-web.pages.dev/api/generate"
payload = {
  "repo": "alex-builds-source/ship-note",
  "preset": "standard",
  "destination": "release",
  "includeWhy": false,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11",
  "releaseUrl": "https://github.com/alex-builds-source/ship-note/releases/tag/v0.1.11"
}

response = requests.post(URL, json=payload, timeout=30)
response.raise_for_status()
data = response.json()
print(data["schema_version"])
print(data["sections"]["what_shipped"])
```

### JavaScript
```javascript
const url = "https://ship-note-web.pages.dev/api/generate";
const payload = {
  "repo": "alex-builds-source/ship-note",
  "preset": "standard",
  "destination": "release",
  "includeWhy": false,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11",
  "releaseUrl": "https://github.com/alex-builds-source/ship-note/releases/tag/v0.1.11"
};

const res = await fetch(url, {
  method: "POST",
  headers: { "content-type": "application/json" },
  body: JSON.stringify(payload),
});
if (!res.ok) throw new Error(`HTTP ${res.status}`);
const data = await res.json();
console.log(data.schema_version);
console.log(data.sections.what_shipped);
```

## social-short

- Description: Concise social draft request/response example.
- Tags: social, short, compact
- Request mode: preset=`short`, destination=`social`, includeWhy=`false`
- Generated files: `docs/snippets/social-short/request.json`, `docs/snippets/social-short/response.json`, `docs/snippets/social-short/curl.sh`, `docs/snippets/social-short/python.py`, `docs/snippets/social-short/javascript.mjs`

### Canonical request
```json
{
  "repo": "alex-builds-source/ship-note",
  "preset": "short",
  "destination": "social",
  "includeWhy": false,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11"
}
```

### Canonical response
```json
{
  "ok": true,
  "schema_version": "1.0",
  "repo": {
    "name": "alex-builds-source/ship-note",
    "url": "https://github.com/alex-builds-source/ship-note"
  },
  "range": {
    "base_ref": "v0.1.10",
    "target_ref": "v0.1.11",
    "range_spec": "v0.1.10..v0.1.11"
  },
  "options": {
    "preset": "short",
    "group_by": "type",
    "destination": "social",
    "include_why": false
  },
  "stats": {
    "raw_commit_count": 1,
    "selected_commit_count": 1,
    "commit_items_used": 1,
    "changelog_items_used": 0,
    "bullet_line_count": 1
  },
  "sections": {
    "title": "# ship-note social update",
    "what_shipped": [
      "- Make why-section optional and ship v0.1.11"
    ],
    "why_it_matters": [],
    "links": [
      "- Repo: https://github.com/alex-builds-source/ship-note"
    ]
  },
  "items": [
    {
      "source": "commit",
      "text": "make why-section optional and ship v0.1.11",
      "sha": "a1b2c3d",
      "type": "other",
      "scope": "general"
    }
  ],
  "markdown": "# ship-note social update\n\n## What shipped\n- Make why-section optional and ship v0.1.11\n\n## Links\n- Repo: https://github.com/alex-builds-source/ship-note\n"
}
```

### cURL
```bash
#!/usr/bin/env bash
set -euo pipefail

curl -sS -X POST 'https://ship-note-web.pages.dev/api/generate' \
  -H 'content-type: application/json' \
  -d '{
  "repo": "alex-builds-source/ship-note",
  "preset": "short",
  "destination": "social",
  "includeWhy": false,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11"
}' | jq .
```

### Python
```python
import requests

URL = "https://ship-note-web.pages.dev/api/generate"
payload = {
  "repo": "alex-builds-source/ship-note",
  "preset": "short",
  "destination": "social",
  "includeWhy": false,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11"
}

response = requests.post(URL, json=payload, timeout=30)
response.raise_for_status()
data = response.json()
print(data["schema_version"])
print(data["sections"]["what_shipped"])
```

### JavaScript
```javascript
const url = "https://ship-note-web.pages.dev/api/generate";
const payload = {
  "repo": "alex-builds-source/ship-note",
  "preset": "short",
  "destination": "social",
  "includeWhy": false,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11"
};

const res = await fetch(url, {
  method: "POST",
  headers: { "content-type": "application/json" },
  body: JSON.stringify(payload),
});
if (!res.ok) throw new Error(`HTTP ${res.status}`);
const data = await res.json();
console.log(data.schema_version);
console.log(data.sections.what_shipped);
```

## internal-standard-with-why

- Description: Internal draft request/response example with rationale enabled.
- Tags: internal, standard, with-why
- Request mode: preset=`standard`, destination=`internal`, includeWhy=`true`
- Generated files: `docs/snippets/internal-standard-with-why/request.json`, `docs/snippets/internal-standard-with-why/response.json`, `docs/snippets/internal-standard-with-why/curl.sh`, `docs/snippets/internal-standard-with-why/python.py`, `docs/snippets/internal-standard-with-why/javascript.mjs`

### Canonical request
```json
{
  "repo": "alex-builds-source/ship-note",
  "preset": "standard",
  "destination": "internal",
  "includeWhy": true,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11"
}
```

### Canonical response
```json
{
  "ok": true,
  "schema_version": "1.0",
  "repo": {
    "name": "alex-builds-source/ship-note",
    "url": "https://github.com/alex-builds-source/ship-note"
  },
  "range": {
    "base_ref": "v0.1.10",
    "target_ref": "v0.1.11",
    "range_spec": "v0.1.10..v0.1.11"
  },
  "options": {
    "preset": "standard",
    "group_by": "type",
    "destination": "internal",
    "include_why": true
  },
  "stats": {
    "raw_commit_count": 1,
    "selected_commit_count": 1,
    "commit_items_used": 1,
    "changelog_items_used": 0,
    "bullet_line_count": 1
  },
  "sections": {
    "title": "# ship-note internal release brief",
    "what_shipped": [
      "- Make why-section optional and ship v0.1.11"
    ],
    "why_it_matters": [
      "- Covers `v0.1.10..v0.1.11` with 1 commit-derived item(s).",
      "- Emphasizes concise internal communication for team context and handoffs."
    ],
    "links": [
      "- Repo: https://github.com/alex-builds-source/ship-note"
    ]
  },
  "items": [
    {
      "source": "commit",
      "text": "make why-section optional and ship v0.1.11",
      "sha": "a1b2c3d",
      "type": "other",
      "scope": "general"
    }
  ],
  "markdown": "# ship-note internal release brief\n\n## What shipped\n- Make why-section optional and ship v0.1.11\n\n## Why it matters\n- Covers `v0.1.10..v0.1.11` with 1 commit-derived item(s).\n- Emphasizes concise internal communication for team context and handoffs.\n\n## Links\n- Repo: https://github.com/alex-builds-source/ship-note\n"
}
```

### cURL
```bash
#!/usr/bin/env bash
set -euo pipefail

curl -sS -X POST 'https://ship-note-web.pages.dev/api/generate' \
  -H 'content-type: application/json' \
  -d '{
  "repo": "alex-builds-source/ship-note",
  "preset": "standard",
  "destination": "internal",
  "includeWhy": true,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11"
}' | jq .
```

### Python
```python
import requests

URL = "https://ship-note-web.pages.dev/api/generate"
payload = {
  "repo": "alex-builds-source/ship-note",
  "preset": "standard",
  "destination": "internal",
  "includeWhy": true,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11"
}

response = requests.post(URL, json=payload, timeout=30)
response.raise_for_status()
data = response.json()
print(data["schema_version"])
print(data["sections"]["what_shipped"])
```

### JavaScript
```javascript
const url = "https://ship-note-web.pages.dev/api/generate";
const payload = {
  "repo": "alex-builds-source/ship-note",
  "preset": "standard",
  "destination": "internal",
  "includeWhy": true,
  "baseRef": "v0.1.10",
  "targetRef": "v0.1.11"
};

const res = await fetch(url, {
  method: "POST",
  headers: { "content-type": "application/json" },
  body: JSON.stringify(payload),
});
if (!res.ok) throw new Error(`HTTP ${res.status}`);
const data = await res.json();
console.log(data.schema_version);
console.log(data.sections.what_shipped);
```

## Add a new fixture

1. Add a fixture file under `docs/fixtures/`.
2. Register it in `docs/fixtures/index.json` with unique `id` and `path`.
3. Run `npm run snippets:generate`.
4. Run `npm test` and `npm run snippets:check`.
